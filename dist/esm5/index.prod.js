!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("rxjs"),require("qrcode-generator"),require("axios"),require("uuid"),require("rxjs/operators"),require("js-base64"));else if("function"==typeof define&&define.amd)define(["rxjs","qrcode-generator","axios","uuid","rxjs/operators","js-base64"],t);else{var n="object"==typeof exports?t(require("rxjs"),require("qrcode-generator"),require("axios"),require("uuid"),require("rxjs/operators"),require("js-base64")):t(e.rxjs,e["qrcode-generator"],e.axios,e.uuid,e["rxjs/operators"],e["js-base64"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,((__WEBPACK_EXTERNAL_MODULE__832__,__WEBPACK_EXTERNAL_MODULE__139__,__WEBPACK_EXTERNAL_MODULE__300__,__WEBPACK_EXTERNAL_MODULE__459__,__WEBPACK_EXTERNAL_MODULE__597__,__WEBPACK_EXTERNAL_MODULE__594__)=>(()=>{"use strict";var __webpack_modules__={633:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>PlatformBridge});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(655),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(832),rxjs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_0__),_Object__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(562),qrcode_generator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(139),qrcode_generator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(qrcode_generator__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(300),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_Hardware__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(533),PlatformBridge=function(_super){function PlatformBridge(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib__WEBPACK_IMPORTED_MODULE_5__.ZT)(PlatformBridge,_super),PlatformBridge.prototype.createQrCode=function(e,t){return new rxjs__WEBPACK_IMPORTED_MODULE_0__.Observable((function(n){var r,o=null!==(r=null==t?void 0:t.SideLength)&&void 0!==r?r:200,u=qrcode_generator__WEBPACK_IMPORTED_MODULE_2__((null==t?void 0:t.type)||4,(null==t?void 0:t.Level)||"H");u.addData(null!=e?e:""),u.make();var i=(o-4)/u.getModuleCount(),c=u.createDataURL(i,2);return n.next(new _Object__WEBPACK_IMPORTED_MODULE_1__.fo(c)),n.complete(),{unsubscribe:function(){return n.unsubscribe()}}}))},PlatformBridge.prototype.loadRunInfo=function(){throw new Error("Method not implemented.")},PlatformBridge.prototype.runCommand=function(command,option){return new rxjs__WEBPACK_IMPORTED_MODULE_0__.Observable((function(subscriber){var result=null,error=null,status=!1;try{result=eval(null==command?void 0:command.toString()),status=!0}catch(e){error=e,status=!1}finally{subscriber.next({result,status,error,command}),subscriber.complete()}return{unsubscribe:function(){return subscriber.unsubscribe()}}}))},PlatformBridge.prototype.open=function(e,t){throw new Error("Method not implemented.")},PlatformBridge.prototype.loadFile=function(e,t){throw new Error("Method not implemented.")},PlatformBridge.prototype.fetch=function(e){return new rxjs__WEBPACK_IMPORTED_MODULE_0__.Observable((function(t){return axios__WEBPACK_IMPORTED_MODULE_3___default().request(e).then((function(e){var n=null,r=null,o={};200!==e.status?n=new Error("".concat(e.status," ").concat(e.statusText)):r=e.data,o.data=r,o.error=n,o.response=e,t.next(new _Object__WEBPACK_IMPORTED_MODULE_1__.R9(o)),t.complete()})).catch((function(e){t.error(e)})),{unsubscribe:function(){t.unsubscribe()}}}))},PlatformBridge}(_Hardware__WEBPACK_IMPORTED_MODULE_4__.D)},533:(e,t,n)=>{n.d(t,{D:()=>r});var r=function(){function e(){}return e.prototype.takePhoto=function(e){throw new Error("Method not implemented.")},e.prototype.recordVideo=function(e){throw new Error("Method not implemented.")},e.prototype.getPhotos=function(){throw new Error("Method not implemented.")},e.prototype.getCurrentPosition=function(){throw new Error("Method not implemented.")},e.prototype.watchPosition=function(e){throw new Error("Method not implemented.")},e.prototype.closePosition=function(){throw new Error("Method not implemented.")},e.prototype.recordAudio=function(){throw new Error("Method not implemented.")},e.prototype.stopAudio=function(){throw new Error("Method not implemented.")},e.prototype.getFile=function(e){throw new Error("Method not implemented.")},e.prototype.startVibrator=function(e){throw new Error("Method not implemented.")},e.prototype.stopVibrator=function(){throw new Error("Method not implemented.")},e.prototype.getSystemInfo=function(){throw new Error("Method not implemented.")},e.prototype.getVolume=function(){throw new Error("Method not implemented.")},e.prototype.setVolume=function(e){throw new Error("Method not implemented.")},e.prototype.getBrightness=function(){throw new Error("Method not implemented.")},e.prototype.setBrightness=function(e){throw new Error("Method not implemented.")},e.prototype.scanBluetooth=function(){throw new Error("Method not implemented.")},e.prototype.connectBluetooth=function(e){throw new Error("Method not implemented.")},e.prototype.bluetoothSendData=function(e){throw new Error("Method not implemented.")},e.prototype.bluetoothReceiveData=function(e){throw new Error("Method not implemented.")},e.prototype.bluetoothClose=function(e){throw new Error("Method not implemented.")},e.prototype.speechInit=function(e){throw new Error("Method not implemented.")},e.prototype.speak=function(e){throw new Error("Method not implemented.")},e.prototype.stopSpeak=function(){throw new Error("Method not implemented.")},e.prototype.clearSpeech=function(){throw new Error("Method not implemented.")},e}()},820:(e,t,n)=>{n.d(t,{f:()=>i});var r=n(655),o=n(624),u=n(358),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.ZT)(t,e),t.prototype.valueOf=function(){return this._value},Object.defineProperty(t.prototype,"length",{get:function(){return(0,u.c)(this._value.length)},enumerable:!1,configurable:!0}),t}((0,o.b)(String,["length"]))},410:(e,t,n)=>{var r;n.d(t,{j:()=>r}),function(e){!function(e){e.More="more",e.Equal="equal",e.Less="less",e.MoreEqual="moreEqual",e.LessEqual="lessEqual"}(e.CompareEnum||(e.CompareEnum={})),function(e){e.Plus="plus",e.Reduce="reduce",e.Multi="multi",e.Divide="divide"}(e.CalcEnum||(e.CalcEnum={}))}(r||(r={}))},131:(e,t,n)=>{n.d(t,{ep:()=>c,l3:()=>p,Lo:()=>h,NT:()=>d,el:()=>a,hy:()=>v,UQ:()=>f,R9:()=>r,Hu:()=>s,fo:()=>_.f,bN:()=>u.b,Ph:()=>u.P});var r=function(){function e(e){void 0===e&&(e={}),this._value=e}return Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"flow-object"},enumerable:!1,configurable:!0}),e.prototype.valueOf=function(){return this._value},e.prototype.json=function(){var e=n(820).f;try{return new e(JSON.stringify(this._value))}catch(t){return new e("{}")}},e}(),o=n(655),u=n(624),i=n(358),c=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,u=t[0],i=u instanceof Array,c=null;return c=i&&1===t.length?u:new(Array.bind.apply(Array,(0,o.ev)([void 0],(0,o.CR)(t),!1))),(r=e.call(this,c)||this)._value=c,r}return(0,o.ZT)(t,e),t.prototype.len=function(){return this._value.length},t.prototype.first=function(){return this._value[0]},t.prototype.last=function(){return this._value[this._value.length-1]},t.prototype.valueOfIndex=function(e){return this._value[e]},t.prototype.valueOf=function(){return this._value},Object.defineProperty(t.prototype,"length",{get:function(){return(0,i.c)(this._value.length)},enumerable:!1,configurable:!0}),t}((0,u.b)(Array,["length"])),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.valueOf=function(){return this._value},t.prototype.len=function(){return this._value.size},Object.defineProperty(t.prototype,"size",{get:function(){return(0,i.c)(this._value.size)},enumerable:!1,configurable:!0}),t}((0,u.b)(Map,["size"])),s=function(e){function t(t){var n=e.call(this)||this;return n._value=new Set(t),n}return(0,o.ZT)(t,e),t.prototype.len=function(){return this._value.size},t.prototype.valueOf=function(){return this._value},Object.defineProperty(t.prototype,"size",{get:function(){return(0,i.c)(this._value.size)},enumerable:!1,configurable:!0}),t}((0,u.b)(Set,["size"])),l=n(225),p=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this,t)||this;return n._value=t,n}return(0,o.ZT)(t,e),t.prototype.valueOf=function(){return!!this._value},t}(r),f=function(e){function t(t){void 0===t&&(t=1);var n=e.call(this,t)||this;return n._value=t,n}var n;return(0,o.ZT)(t,e),n=t,Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return e.prototype[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.valueOf=function(){return this._value},t.prototype.json=function(){return e.prototype.json.call(this)},t.prototype.compare=function(e,t){return new p(!1)},t.prototype.more=function(e){return new p(this._value>e._value)},t.prototype.equal=function(e){return new p(this._value===e._value)},t.prototype.less=function(e){return new p(this._value<e._value)},t.prototype.moreEqual=function(e){return new p(this._value>=e._value)},t.prototype.lessEqual=function(e){return new p(this._value<=e._value)},t.prototype.calc=function(e,t){return new n(0)},t.prototype.plus=function(e){return new n(this._value+e._value)},t.prototype.reduce=function(e){return new n(this._value-e._value)},t.prototype.multi=function(e){return new n(this._value*e._value)},t.prototype.divide=function(e){return new n(0===e._value?1/0:this._value/e._value)},(0,o.gn)([l.vN,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[String,Object]),(0,o.w6)("design:returntype",p)],t.prototype,"compare",null),(0,o.gn)([l.vN,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[String,Object]),(0,o.w6)("design:returntype",t)],t.prototype,"calc",null),t=n=(0,o.gn)([l.SI,l.Y$,(0,o.w6)("design:paramtypes",[Number])],t)}((0,u.b)(Number)),_=n(820),d=function(e){function t(t){void 0===t&&(t=new Date);var n=e.call(this,t)||this;return n._value=t,n}return(0,o.ZT)(t,e),t.prototype.valueOf=function(){return this._value},t.prototype.toLocaleString=function(){return(0,i.c)(this._value.toLocaleDateString())},t.prototype.timestamp=function(){return(0,i.c)(this._value.getDate())},t}((0,u.b)(Date)),h=function(e){function t(t){void 0===t&&(t=new ArrayBuffer(0));var n=e.call(this,t)||this;return n._value=t,n}return(0,o.ZT)(t,e),t.prototype.data=function(){return this.valueOf()},t.prototype.valueOf=function(){return this._value},t}(r),v=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this,t)||this;return n._value=t,n}return(0,o.ZT)(t,e),t.prototype.valueOf=function(){return this._value},t.prototype.merge=function(e){return new t(null)},t.prototype.isTruly=function(){return!!this._value},t.prototype.isNull=function(){return null===this._value},t.prototype.isUndefined=function(){return void 0===this._value},t}(r)},624:(e,t,n)=>{n.d(t,{P:()=>a,b:()=>c});var r,o=n(655),u=n(225),i=n(131);function c(e,t){if(void 0===t&&(t=[]),r||(r=new Map),r.has(e))return r.get(e);var n={};t=(0,o.ev)((0,o.ev)([],(0,o.CR)(t),!1),["constructor","valueOf"],!1),Object.keys(Object.getOwnPropertyDescriptors(e.prototype)).forEach((function(e){t.includes(e)||"symbol"==typeof e||(n[e]=e)}));var c=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n._value=null!=t?t:{},n}return(0,o.ZT)(t,e),t=(0,o.gn)([(0,u.fb)(n),(0,o.w6)("design:paramtypes",[Object])],t)}(i.R9);return r.set(e,c),c}function a(e,t,n){void 0===n&&(n=[]);var r=c(e,n);return Reflect.construct(r,t)}},562:(e,t,n)=>{n.d(t,{Hu:()=>r.Hu,Lo:()=>r.Lo,NT:()=>r.NT,Ph:()=>r.Ph,R9:()=>r.R9,UQ:()=>r.UQ,bN:()=>r.bN,el:()=>r.el,ep:()=>r.ep,fo:()=>r.fo,hy:()=>r.hy,l3:()=>r.l3});var r=n(131);n(624)},225:(e,t,n)=>{n.d(t,{SI:()=>l,Y$:()=>s,fb:()=>p,vN:()=>a});var r=n(655),o=n(131),u=n(410),i=n(358),c="onlyDeclaration";function a(e,t,n){n.value.declaration=c}function s(e){var t;Object.keys(u.j.CompareEnum).forEach((function(t){var n=u.j.CompareEnum[t],r=e.prototype[n];r&&r.declaration!==c||(e.prototype[n]=function(){return new o.l3(!1)})})),(null===(t=e.prototype.compare)||void 0===t?void 0:t.declaration)!==c&&!1!=!!e.prototype.compare||(e.prototype.compare=function(t,n){var r,o=null===(r=e.prototype[t])||void 0===r?void 0:r.bind(this);return!(!o||"function"!=typeof o)&&o.call(this,n)})}function l(e){var t;Object.keys(u.j.CalcEnum).forEach((function(t){var n=u.j.CalcEnum[t],r=e.prototype[n];r&&r.declaration!==c||(e.prototype[n]=function(){return new o.UQ(0)})})),(null===(t=e.prototype.calc)||void 0===t?void 0:t.declaration)!==c&&!1!=!!e.prototype.calc||(e.prototype.calc=function(t,n){var r,o=null===(r=e.prototype[t])||void 0===r?void 0:r.bind(this);return!(!o||"function"!=typeof o)&&o.call(this,n)})}function p(e){var t="execFunction";return function(n){var o;Object.keys(e).forEach((function(t){var o=e[t],u=n.prototype[o];u&&u.declaration!==c||(n.prototype[o]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,u=this.valueOf(),c=u[o];return n="function"==typeof c?c.bind(u).apply(void 0,(0,r.ev)([],(0,r.CR)(e),!1)):u,(0,i.c)(n)})})),(null===(o=n.prototype[t])||void 0===o?void 0:o.declaration)!==c&&!1!=!!n.prototype[t]||(n.prototype[t]=function(e){for(var t,o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var i=null===(t=n.prototype[e])||void 0===t?void 0:t.bind(this);return!(!i||"function"!=typeof i)&&i.apply(void 0,(0,r.ev)([],(0,r.CR)(o),!1))})}}},358:(e,t,n)=>{n.d(t,{c:()=>c,p:()=>i});var r=n(131),o=null,u=function(){return null===o&&(o={"[object Object]":r.R9,"[object Map]":r.el,"[object Set]":r.Hu,"[object Array]":r.ep,"[object Boolean]":r.l3,"[object Date]":r.NT,"[object Number]":r.UQ,"[object String]":r.fo,"[object ArrayBuffer]":r.Lo,"[object Uint8Array]":r.Lo,"[object Promise]":r.R9,"[object Null]":r.hy,"[object Undefined]":r.hy}),o},i=function(e){return u(),"[object flow-object]"===Object.prototype.toString.call(e)};function c(e,t){if(void 0===t&&(t=!1),u(),i(e)&&!1===t)return e;var n=Object.prototype.toString.call(e),c=o[n];return c?new c(null!=e?e:{}):new r.R9(e)}},655:(e,t,n)=>{n.d(t,{CR:()=>l,Jh:()=>s,ZT:()=>o,ev:()=>p,gn:()=>i,mG:()=>a,pi:()=>u,w6:()=>c});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)};function i(e,t,n,r){var o,u=arguments.length,i=u<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(u<3?o(i):u>3?o(t,n,i):o(t,n))||i);return u>3&&i&&Object.defineProperty(t,n,i),i}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function a(e,t,n,r){return new(n||(n=Promise))((function(o,u){function i(e){try{a(r.next(e))}catch(e){u(e)}}function c(e){try{a(r.throw(e))}catch(e){u(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}Object.create;function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,u=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=u.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return i}function p(e,t,n){if(n||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create},300:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__300__},594:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__594__},139:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__139__},832:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__832__},597:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__597__},459:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__459__}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ArrayObject:()=>t.ep,Base64DecodeWork:()=>G,Base64EnCodeWork:()=>z,BooleanObject:()=>t.l3,Context:()=>X,ControlFlow:()=>o.j,DataObject:()=>t.Lo,DateObject:()=>t.NT,DelayIntervalWork:()=>ue,FetchWork:()=>te,InstructionMTM:()=>V,InstructionOTM:()=>F,InstructionOTO:()=>Z,IntervalWork:()=>re,LoadFileWork:()=>J,MapObject:()=>t.el,NULLObject:()=>t.hy,NumberObject:()=>t.UQ,ObjectTarget:()=>t.R9,OpenURLWork:()=>Y,QRCodeWork:()=>ee,RunCommandWork:()=>ne,SetObject:()=>t.Hu,StringObject:()=>t.fo,TimeoutWork:()=>oe,WorkType:()=>e,createExtendsConstruct:()=>t.bN,createExtendsInstance:()=>t.Ph,decide:()=>q.c,isAbleType:()=>q.p,unpackValue:()=>N,wrapperValue:()=>U});var e,t=__webpack_require__(562);!function(e){!function(e){e[e.INIT=0]="INIT",e[e.READY=1]="READY",e[e.RUNNING=2]="RUNNING",e[e.COMPLETE=3]="COMPLETE"}(e.WorkRunStatus||(e.WorkRunStatus={}))}(e||(e={}));var n,r,o=__webpack_require__(410),u=__webpack_require__(655),i=__webpack_require__(832);!function(e){e.Audio="audio/*",e.Video="video/*",e.HTML="text/html",e.Txt="text/plain",e.Image="image/*",e.Csv=".csv",e.Pdf="application/pdf",e.Word="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/msword，application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.All="*"}(n||(n={})),function(e){e.JSON="application/json",e.TEXT="text/plain"}(r||(r={}));var c,a,s={development:!0,environment:{},workConfig:{QRCodeWork:{type:4,Level:"H",SideLength:100},RunCommandWork:{},LoadFileWork:{type:n.All},FetchWork:{headers:{"Access-Control-Allow-Origin":"*"}}}},l=function(e,t,n){return e.indexOf(t)>=0?(e=e.replace(t,n),l(e,t,n)):e};Function.call.bind(Object.prototype.hasOwnProperty);function p(){}!function(e){e[e.NODE_PC=10]="NODE_PC",e[e.WEB_PC=20]="WEB_PC",e[e.WEB_MOBILE=26]="WEB_MOBILE",e[e.OTHER=100]="OTHER"}(a||(a={}));var f="win",_="mac",d="linux",h="iOS",v="Android",b="bb",m="winphone",y="other";var w,E,O=Function("return this")();if(O.process&&"[object process]"===(E=O.process,Object.prototype.toString.call(E)))w=a.NODE_PC;else switch(null===(c=function(){if(navigator.userAgent){var e,t,n=navigator.userAgent;if(e=/Windows Phone (?:OS )?([\d.]*)/,t=n.match(e))return{name:m,versionStr:t[1]};if(n.indexOf("(BB10;")>0)return e=/\sVersion\/([\d.]+)\s/,(t=n.match(e))?{name:b,versionStr:t[1]}:{name:b,versionStr:"10"};if(e=/\(([a-zA-Z ]+);\s(?:[U]?[;]?)([\D]+)((?:[\d._]*))(?:.*[\)][^\d]*)([\d.]*)\s/,t=n.match(e)){if(t[0].match(/iPhone|iPad|iPod/))return t[3]=t[3].replace(/_/g,"."),{name:h,versionStr:t[3]};if(t[2].match(/Android/))return t[2]=t[2].replace(/\s/g,""),{name:v,versionStr:t[3]};if(t[0].match(/PlayBook|BlackBerry/))return{name:b,versionStr:t[4]}}return e=/\((Android)[\s]?([\d][.\d]*)?;.*Firefox\/[\d][.\d]*/,(t=n.match(e))?{name:v,versionStr:3==t.length?t[2]:""}:function(){var e=navigator.platform;if(-1!=e.indexOf("Win")){var t=n.match(/Windows NT (\d+).(\d)/i),r="";return"6"==t[1]?1==t[2]?r="7":t[2]>1&&(r="8"):r=t[1],{name:f,versionStr:r}}return-1!=e.indexOf("Mac")?{name:_,versionStr:""}:-1!=e.indexOf("Linux")?{name:d,versionStr:""}:null}()}return{name:y,versionStr:""}}())||void 0===c?void 0:c.name){case f:case _:w=a.WEB_PC;break;case h:case v:w=a.WEB_MOBILE;break;case d:w=a.WEB_PC;break;default:w=a.OTHER}var g=w===a.WEB_MOBILE||w===a.WEB_PC,k=w===a.NODE_PC,x=w===a.NODE_PC||w===a.WEB_PC,P=(a.WEB_MOBILE,!0),M=function(e){var t;return g?t=e.web:k&&(t=e.node),t},T=__webpack_require__(633),C=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(n,e),n.prototype.open=function(e){return(0,i.of)(new t.l3(!1))},n.prototype.loadFile=function(e,n){return(0,i.of)(new t.R9({total:0,loaded:0,data:new ArrayBuffer(0),finish:!0,file:void 0}))},n}(T.s),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(T.s),j=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(n,e),n.prototype.open=function(e){var n=window.open(e,"__blank");return(0,i.of)(new t.l3(null!==n))},n.prototype.loadFile=function(e,n){return new i.Observable((function(e){var r=document.createElement("input");return r.type="file",r.id="_temp_input_select",r.accept=(null==n?void 0:n.type)||"*",r.style.display="none",document.body.append(r),r.addEventListener("change",(function(n){var o=new FileReader,u=r.files[0];o.onprogress=function(n){var r=n.total,i=n.loaded,c=o.result;e.next(new t.R9({total:r,loaded:i,data:c,finish:!1,file:u}))},o.onload=function(n){var r=o.result,i=n.total,c=n.loaded;e.next(new t.R9({total:i,loaded:c,data:r,finish:!0,file:u})),e.complete()},o.onerror=function(t){e.error(t)},o.readAsArrayBuffer(u)})),r.click(),{unsubscribe:function(){return e.unsubscribe()}}}))},n}(T.s),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(j),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t}(j),A=M({web:{pc:R,mobile:L},node:{pc:W,mobile:C}})[x?"pc":"mobile"];const B=Reflect.construct(A,[]);var D=__webpack_require__(459),S=__webpack_require__(597),I=function(e,t,n,r){this.context=e,this.work=t,this.sub=n,this.uuid=null!=r?r:(0,D.v4)()},q=__webpack_require__(358);function N(e){return!1==!!e?"":(null==e?void 0:e._value).value.valueOf()}function U(e,n){var r=(0,q.c)(n);return new t.R9((0,u.pi)((0,u.pi)({},e._value),{value:r}))}var K=function(e){function n(){var t=e.call(this)||this;return t.name="Instruction",t.id=n._id++,t.runSubscriptions=new Map,t.pools=[],t.config={development:!0},t.uuid=(0,D.v4)(),t}return(0,u.ZT)(n,e),n.prototype.prepare=function(e,t){var n;return this.beforeWork=e,this.nextWork=t,this.config=(null===(n=this.context)||void 0===n?void 0:n.runOptions)||{},this._connectChannel(),Promise.resolve()},n.prototype._connectChannel=function(){var e=this,t=this,n=this.pipe((0,S.tap)((function(n){var r,o;(null===(r=e.config)||void 0===r?void 0:r.development)&&(null===(o=t.context)||void 0===o||o.sendLog({work:[t],content:e.context,desc:"[Work:preRun]->接受到数据",value:n}))}))).subscribe({complete:function(){},error:function(e){return t.error(e)},next:function(e){return t._run(e)}});this.pools.push(n)},n.prototype._run=function(e){var n,r=this,o=function(t,n,o){var i,c;(null===(i=u.config)||void 0===i?void 0:i.development)&&(null===(c=u.context)||void 0===c||c.sendLog({work:[u],content:r.context,desc:t,value:n||e,error:o}))};e=this.nextValue(e)||e;var u=this,c=((null===(n=this.config)||void 0===n?void 0:n.workConfig)||{})[this.name]||{},a=M({web:function(){var t;return(null!==(t=u.web_run)&&void 0!==t?t:u.run||p).bind(u)(e,c)},node:function(){var t;return(null!==(t=u.node_run)&&void 0!==t?t:u.run||p).bind(u)(e,c)},other:function(){return(u.run||p).bind(u)(e,c)}});o("[Work][Func:run]->入口",e);var s=(0,D.v4)(),l=a(e).pipe((0,S.tap)((function(e){o("[Work][Func:run]->结果",e)})),(0,S.observeOn)(i.asyncScheduler)).subscribe({complete:function(){var e=u.runSubscriptions.get(s);null==e||e.sub.unsubscribe(),u.runSubscriptions.delete(s)},error:function(n){o("[Work][Func:run]->执行错误",e,n),u.completeOneLoop(e,new t.hy,!1)},next:function(t){var n;o("[Work][Func:run]->将执行下一个Work",t),u.completeOneLoop(e,t,!0),null===(n=u.nextWork)||void 0===n||n.next(t)}}),f=new I(u.context,u,l,s);this.runSubscriptions.set(f.uuid,f)},n.prototype.stopWork=function(){var e=this;return new i.Observable((function(t){return e.runSubscriptions.forEach((function(e){null==e||e.sub.unsubscribe()})),t.next(!0),t.complete(),{unsubscribe:function(){return t.unsubscribe()}}}))},n.prototype.clear=function(){this.pools&&this.pools.forEach((function(e){return e.unsubscribe()})),this.pools.length=0,this.unsubscribe()},n.prototype.error=function(e){this.context&&this.context.sendLog({work:[this],content:this.context,desc:"[Work:preRun]-接受上一个消息错误",date:new Date,value:new t.fo(e.message)})},n.prototype.addVariable=function(e,t){this.context&&this.context.addVariable(this,e,t)},n.prototype.logMsg=function(e,t){var n,r;(null===(n=this.config)||void 0===n?void 0:n.development)&&(null===(r=this.context)||void 0===r||r.sendLog({work:[this],content:this.context,desc:e,value:U(t,null)}))},n.prototype.next=function(t){!1===this.closed?e.prototype.next.call(this,t):this.context.sendLog({work:[this],content:this.context,desc:this.toString()+" 已经关闭",value:U(t,null)})},n.prototype.nextValue=function(e){return e},n.prototype.completeOneLoop=function(e,t,n){},n.prototype.toString=function(){return"[".concat(this.name,":").concat(this.id,"]")},n.prototype.isAble=function(){return this.__proto__.isAble()},n.isAble=function(){return P},n._id=0,n}(i.Subject),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t.prototype.nextValue=function(e){return e},t.prototype.completeOneLoop=function(e,t,n){},t.prototype.run=function(e){return new i.Observable((function(t){return t.next(e),t.complete(),{unsubscribe:function(){return t.unsubscribe()}}}))},t}(K),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="MultipleInstruction",t}return(0,u.ZT)(t,e),t.prototype.nextValue=function(e){return e},t.prototype.completeOneLoop=function(e,t,n){},t.prototype.run=function(e){return new i.Observable((function(t){return t.next(e),t.complete(),{unsubscribe:function(){return t.unsubscribe()}}}))},t}(K),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="MultipleInstruction",t}return(0,u.ZT)(t,e),t.prototype.nextValue=function(e){return e},t.prototype.completeOneLoop=function(e,t,n){},t.prototype.run=function(e){return new i.Observable((function(t){return t.next(e),t.complete(),{unsubscribe:function(){return t.unsubscribe()}}}))},t}(K),H=function(e){function n(){var t=e.call(this)||this;return t.name="BeginWork",t.uuid=(0,D.v4)(),t}return(0,u.ZT)(n,e),n.prototype.startRun=function(e,n){var r=null!=n?n:(0,D.v4)();this.nextWork.next(new t.R9({id:r,value:(0,q.c)(e),option:{}}))},n.prototype.completeOneLoop=function(){},n.isAble=function(){return P},n._id=0,n}(Z),X=function(){function n(t){var n=this;this.status=e.WorkRunStatus.INIT,this.platform=B,this.runConstant=new Map,this.works=[],this.msgChannel=new i.Subject,this.pools=[],this.runOptions=t||s;var r=this.msgChannel.subscribe({next:function(e){return n.workMessage(e)},error:function(e){return n.workError(e)}});this.pools.push(r),this.addWork(new H)}return n.prototype.addVariable=function(e,t,n){!this.runConstant.get(e.uuid)&&this.runConstant.set(e.uuid,new Map),this.runConstant.get(e.uuid).set(t,n)},n.prototype.workMessage=function(e){console.log("msgChannel",e)},n.prototype.workError=function(e){console.log("msgChannelError",e),this.stopWorkChain()},n.prototype.addWorkLog=function(e){return this.msgChannel.subscribe(e)},n.prototype.sendLog=function(e){var t={date:new Date,work:e.work.filter((function(e){return null==e?void 0:e.name})),desc:e.desc,value:e.value,error:e.error};this.msgChannel.next(t)},n.prototype.addWork=function(n){if(n.constructor.isAble&&!1===n.constructor.isAble()){var r="[content][Func:addWork][work isAble is false]";return this.sendLog({content:this,work:[],desc:r,value:null,error:new Error(r)})}if(this.status!==e.WorkRunStatus.INIT)return this.sendLog({content:this,work:[],desc:"[content][Func:addWork][context status is not init]",value:new t.l3(!1)});n.context=this,this.works.push(n)},n.prototype.addWorks=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach(this.addWork)},n.prototype.prepareWorks=function(){return(0,u.mG)(this,void 0,void 0,(function(){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return this.status!==e.WorkRunStatus.INIT?[2,this.sendLog({content:this,work:[],desc:"[content][Func:prepareWorks][context status is not init]",value:new t.l3(!1)})]:[4,Promise.all(this.works.map((function(e,t,n){var r=n[t-1],o=n[t+1];return e.prepare(r,o)})))];case 1:return n.sent(),this.status=e.WorkRunStatus.READY,[2]}}))}))},n.prototype.dispatch=function(n){if(this.status===e.WorkRunStatus.INIT)return this.sendLog({content:this,work:[],desc:"[context][Func:run][run status is not ready  or 已经初始化]",value:new t.l3(!1)});var r=this.works[0];r&&r.startRun((0,q.c)(n)),this.status=e.WorkRunStatus.RUNNING},n.prototype.stopWorkChain=function(){var e=this,n=this;return new Promise((function(r,o){var u=e.works.map((function(e){return e.stopWork()})),c=!1,a=[];(0,i.forkJoin)(u).pipe((0,S.take)(1)).subscribe({next:function(t){c=t.every((function(t,n){return!0===t||(a.push(e.works[n]),!1)})),r(c)},error:function(e){o(e)},complete:function(){e.sendLog({content:n,work:a,desc:"[content][Func:stopWorkChain]",value:new t.R9({id:"stopWorkChain",value:(0,q.c)(c),option:{}})})}})}))},n.prototype.clear=function(){this.pools.forEach((function(e){return e.unsubscribe()}))},n}(),Q=__webpack_require__(594),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="Base64EnCodeWork",t}return(0,u.ZT)(t,e),t.prototype.run=function(e){return new i.Observable((function(t){var n;return n=null==e?"":N(e),t.next(U(e,Q.Base64.encode(n))),t.complete(),{unsubscribe:function(){return t.unsubscribe()}}}))},t.isAble=function(){return P},t}(V),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="Base64DecodeWork",t}return(0,u.ZT)(t,e),t.prototype.run=function(e){return new i.Observable((function(t){var n;return n=null==e?"":N(e),t.next(U(e,Q.Base64.decode(n))),t.complete(),{unsubscribe:function(){return t.unsubscribe()}}}))},t.isAble=function(){return P},t}(V),$=function(e){function r(t){var r=e.call(this)||this;return r.name="LoadFileWork",r.currentConfig={type:n.All},r.currentConfig=t||{type:n.All},r}return(0,u.ZT)(r,e),r.prototype.run=function(e,n){var r=this,o=this,c=(0,u.pi)((0,u.pi)({},n),this.currentConfig);return new i.Observable((function(n){var i=N(e),a=o.context.platform.loadFile(i,c).pipe((0,S.tap)((function(t){var n=t.valueOf(),o=n.loaded,u=n.total,i=n.finish;r.logMsg("加载进度[load:progress]---：".concat(o,"/").concat(u," 是否完成：").concat(i),e)})),(0,S.takeLast)(1)).subscribe({next:function(r){var o=r.valueOf(),i=o.data,c=o.file;n.next(new t.R9((0,u.pi)((0,u.pi)({},e._value),{value:new t.Lo(i),option:{file:c}}))),n.complete()},complete:function(){return n.complete()},error:function(e){return n.error(e)}});return{unsubscribe:function(){a.unsubscribe(),n.unsubscribe()}}}))},r.isAble=function(){return P},r}(Z);const J=$;const Y=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="OpenURLWork",t}return(0,u.ZT)(n,e),n.prototype.run=function(e,n){var r=this;return new i.Observable((function(o){var u=N(e),i=r.context.platform.open(u,n).subscribe({next:function(n){return o.next(U(e,new t.l3(!0)))},complete:function(){return o.complete()},error:function(e){return o.error(e)}});return{unsubscribe:function(){i.unsubscribe(),o.unsubscribe()}}}))},n.isAble=function(){return P},n}(Z);var ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="QRCodeWork",t}return(0,u.ZT)(t,e),t.prototype.run=function(e,t){var n=this;return new i.Observable((function(r){var o;o=null==e?"":N(e);var u=n.context.platform.createQrCode(o,t).subscribe({next:function(t){return r.next(U(e,t._value))},complete:function(){return r.complete()},error:function(e){return r.error(e)}});return{unsubscribe:function(){u.unsubscribe(),r.unsubscribe()}}}))},t.isAble=function(){return P},t}(Z);const te=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="FetchWork",t}return(0,u.ZT)(n,e),n.prototype._getInitOption=function(e,t){void 0===t&&(t={});var n=e.valueOf(),r=n.url,o=n.method,i=n.timeout,c=n.data,a={url:r,method:n.method||t.method||"GET",timeout:i||t.timeout||1e4,headers:(0,u.pi)((0,u.pi)({},t.headers||{}),n.headers||{})};return a.data=c,o&&"GET"===o.toLocaleUpperCase()&&(a.headers["Content-Type"]=a.headers["Content-Type"]||"application/json"),a.timeoutErrorMessage="请求超时",a},n.prototype.run=function(e,n){var r=this,o=this,c=this._getInitOption(e._value.value,n);return new i.Observable((function(n){var i=o.context.platform.fetch(c).pipe((0,S.tap)((function(t){var n=t.valueOf().data;r.logMsg("[FetchWork][load:data]".concat(n),e)}))).subscribe({next:function(r){var o=r.valueOf();o.error?n.error(o.error):(n.next(new t.R9((0,u.pi)((0,u.pi)({},e._value),{value:o.data}))),n.complete())},error:function(e){return n.error(e)},complete:function(){return n.complete()}});return{unsubscribe:function(){n.unsubscribe(),i.unsubscribe()}}}))},n.isAble=function(){return P},n}(Z);const ne=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.call(this)||this;if(r.template="",r.name="RunCommandWork",r.paramsConfig={},r.callBack=void 0,"string"==typeof t[0]){var o=t[0]||"$I$",u=t[1]||{"*":"$I$"};r.template=o,r.paramsConfig=u}else"function"==typeof t[0]&&(r.callBack=t[0]);return r}return(0,u.ZT)(t,e),t.prototype.run=function(e,t){var n=this,r=this;return new i.Observable((function(o){var u;u=r.callBack&&"function"==typeof r.callBack?n.callBack(N(e),t):function(e,t,n,r){var o=N(t),u=e;if("string"==typeof o){var i=n["*"];i&&(u=l(u,i,o))}else Object.keys(n).forEach((function(e){var t=n[e],r=o[e];u=l(u,t,r)}));return u}(r.template,e,n.paramsConfig);var i=r.context.platform.runCommand(u).subscribe({next:function(t){n.logMsg("执行command：".concat(t.error?"失败":"成功","。结果：").concat(t.result),e),o.next(U(e,t.error?void 0:t.result))},complete:function(){return o.complete()},error:function(e){return o.error(e)}});return{unsubscribe:function(){i.unsubscribe(),o.unsubscribe()}}}))},t.isAble=function(){return P},t}(Z);var re=function(e){function t(t,n,r){void 0===n&&(n=1/0);var o=e.call(this)||this;return o.name="IntervalWork",o.intervalTime=t||1e3,o.maxCount=n,o.notifier=r||i.NEVER,o}return(0,u.ZT)(t,e),t.prototype.run=function(e){var t=this,n=parseInt(N(e))||this.intervalTime||1e3,r=this;return new i.Observable((function(o){var u=(0,i.interval)(n,i.asyncScheduler).pipe((0,S.take)(r.maxCount),(0,S.takeUntil)(t.notifier)).subscribe({next:function(t){return o.next(U(e,t))},error:function(e){return o.error(e)},complete:function(){return o.complete()}});return{unsubscribe:function(){o.unsubscribe(),u.unsubscribe()}}}))},t}(F),oe=function(e){function t(t){var n=e.call(this)||this;return n.name="TimeoutWork",n.intervalTime=t||1e3,n}return(0,u.ZT)(t,e),t.prototype.run=function(e){var t=parseInt(N(e))||this.intervalTime||1e3;return new i.Observable((function(n){var r=(0,i.interval)(t,i.asyncScheduler).pipe((0,S.take)(1)).subscribe({next:function(t){n.next(U(e,t))},error:function(e){return n.error(e)},complete:function(){return n.complete()}});return{unsubscribe:function(){n.unsubscribe(),r.unsubscribe()}}}))},t}(Z),ue=function(e){function n(t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1e3),void 0===r&&(r=1/0);var u=e.call(this)||this;return u.name="DelayIntervalWork",u.intervalTime=n||1e3,u.maxCount=r,u.delayTime=t||0,u.notifier=o||i.NEVER,u}return(0,u.ZT)(n,e),n.prototype.run=function(e){var n=this,r=parseInt(N(e))||this.intervalTime||1e3,o=this;return new i.Observable((function(u){var c=(0,i.timer)(o.delayTime,r,i.asyncScheduler).pipe((0,S.take)(o.maxCount),(0,S.takeUntil)(n.notifier)).subscribe({next:function(n){return u.next(U(e,new t.UQ(n)))},error:function(e){return u.error(e)},complete:function(){return u.complete()}});return{unsubscribe:function(){u.unsubscribe(),c.unsubscribe()}}}))},n}(F)})(),__webpack_exports__})()));